# 小学成绩分析系统 - 使用说明

## 📖 系统简介

这是一个专为小学设计的成绩分析系统，支持多个老师同时使用，具有完善的权限管理和数据分析功能。

### 主要功能
- ✅ 成绩上传与管理
- ✅ 年级数据分析（三率统计）
- ✅ 班级数据分析（本班三率）
- ✅ 学生成绩变化跟踪
- ✅ 三率历史对比分析
- ✅ 权限管理（班级老师/管理员）
- ✅ 数据云端存储（Supabase）

---

## 🚀 快速开始

### 方式一：在线访问（推荐）

直接访问部署好的网站：
```
https://你的域名.zeabur.app
```

无需安装，打开即用！

### 方式二：本地运行

1. **安装依赖**（首次使用）
```bash
cd D:\新建文件夹\sanlv
npm install
```

2. **启动系统**
```bash
npm run dev
```

3. **打开浏览器**
访问 http://localhost:3000

---

## 🔐 登录系统

### 班级老师登录

**密码规则：** 年级数字 + 0 + 班级号

**示例：**
| 班级 | 密码 | 权限 |
|------|------|------|
| 一年级1班 | 101 | 只能查看/上传本班数据 |
| 二年级3班 | 203 | 只能查看/上传本班数据 |
| 三年级2班 | 302 | 只能查看/上传本班数据 |
| 四年级5班 | 405 | 只能查看/上传本班数据 |
| 五年级1班 | 501 | 只能查看/上传本班数据 |
| 六年级4班 | 604 | 只能查看/上传本班数据 |

**登录步骤：**
1. 选择年级（如：三）
2. 输入班级号（如：2）
3. 输入密码（如：302）
4. 点击"登录"

### 管理员登录

**密码：** `admin123`

**权限：** 可以查看和管理所有年级、所有班级的数据

**登录步骤：**
1. 选择任意年级
2. 输入任意班级号
3. 输入密码：admin123
4. 点击"登录"

### 退出登录

点击右上角用户名 → 选择"退出登录"

---

## 📊 功能详解

### 一、成绩上传

#### 准备Excel文件

**必须包含的列：**
- 姓名（学生姓名）

**学科成绩列：**
- 可以是任意学科名称，如：语文、数学、英语、科学、音乐、体育等
- 系统会自动识别所有学科

**Excel格式示例：**

| 姓名 | 语文 | 数学 | 英语 | 科学 |
|------|------|------|------|------|
| 张三 | 95   | 88   | 92   | 90   |
| 李四 | 87   | 92   | 85   | 88   |
| 王五 | 90   | 85   | 88   | 92   |

#### 上传步骤

1. 点击左侧菜单 **"成绩上传"**
2. 系统会根据登录角色自动设置年级和班级：
   - **班级老师**：年级和班级已锁定（只能上传本班）
   - **管理员**：可以选择任意年级和班级
3. 拖拽或点击上传Excel文件
4. 系统自动识别学科和学生
5. 确认每个学科的总分（默认100分，可修改）
6. 预览数据无误后，点击 **"保存数据"**

#### 注意事项
- ⚠️ Excel中的成绩必须是数字格式
- ⚠️ 避免空白单元格
- ✅ 同一班级可以多次上传（用于记录不同考试）

---

### 二、年级数据分析

点击 **"年级数据"** 菜单

#### 查看内容

1. **年级总分三率**
   - 优秀率、及格率、综合率、三率之和
   - 基于全年级前90%学生计算

2. **年级各学科三率**
   - 每个学科的优秀率、及格率、综合率、三率之和
   - 用表格和数据清晰展示

3. **年级总分三率标准分**
   - 优秀率计数标准分（前20%）
   - 及格率计数标准分（总分60%）
   - 综合率计数标准分（平均分）

4. **年级各学科三率标准分**
   - 每个学科的三率标准分

5. **年级学生成绩总表**
   - 年级排名、班级排名
   - 各学科分数（黑色字体）
   - 各学科降序列（红色字体，便于查看排名）
   - 总分

#### 权限说明
- **班级老师**：可查看所有年级数据（有橙色提示）
- **管理员**：无限制

---

### 三、班级数据分析

点击 **"班级数据"** 菜单

#### 查看内容

1. **本班总分三率标准分**（基于本班前95%）
   - 优秀率计数标准分
   - 及格率计数标准分
   - 综合率计数标准分

2. **本班各学科三率标准分**（基于本班前95%）
   - 每个学科的三率标准分

3. **本班总分三率**（基于本班标准分）
   - 优秀率、及格率、综合率、三率之和
   - 用彩色标注，清晰直观

4. **本班各学科三率**（基于本班标准分）
   - 每个学科的优秀率、及格率、综合率、三率之和

5. **班级学生成绩表**
   - 班级排名、年级排名
   - 各学科分数（黑色字体）
   - 各学科降序列（红色粗体，按分数从高到低）
   - 总分
   - 支持点击列头排序

#### 参评人数计算规则
- **年级标准**：全年级按总分排序，取前90%
- **班级标准**：本班按总分排序，取前95%

#### 权限说明
- **班级老师**：只能查看本班数据（年级班级下拉框禁用）
- **管理员**：可查看所有班级数据

---

### 四、学生成绩变化

点击 **"学生成绩变化"** 菜单

#### 功能说明

跟踪单个学生的成绩变化趋势

#### 使用步骤

1. 选择年级（班级老师已锁定本班）
2. 选择班级（班级老师已锁定本班）
3. 选择学生（支持搜索）
4. 查看该学生的历史成绩

#### 查看内容

1. **总分趋势图**
   - 折线图展示总分变化
   - 横轴：第1次、第2次...
   - 纵轴：总分

2. **各学科成绩趋势图**
   - 多条折线，每个学科一种颜色
   - 清晰对比各科表现

3. **历史成绩明细表**
   - 时间、日期
   - 总分、各科分数
   - 便于详细分析

#### 权限说明
- **班级老师**：只能查看本班学生
- **管理员**：可查看所有学生

---

### 五、三率历史对比

点击 **"三率历史对比"** 菜单

#### 功能说明

查看班级三率的历史变化趋势（基于本班前95%学生计算）

#### 使用步骤

1. 选择年级（班级老师已锁定）
2. 选择班级（班级老师已锁定）
3. 查看该班级的三率变化

#### 查看内容

1. **班级总分三率趋势图**
   - 优秀率（绿色实线）
   - 及格率（蓝色实线）
   - 综合率（橙色实线）
   - 三率之和（红色虚线，加粗）
   - 四条曲线在一个图中，便于对比

2. **各学科三率趋势图**
   - 每个学科一个独立图表
   - 包含：优秀率、及格率、综合率、三率之和
   - 用不同颜色区分

3. **班级总分三率历史数据明细**
   - 表格形式展示每次考试的三率数据
   - 包含参评人数

4. **各学科三率历史数据明细**
   - 每个学科的三率历史记录
   - 便于横向对比

#### 权限说明
- **班级老师**：只能查看本班三率历史
- **管理员**：可查看所有班级三率历史

---

### 六、数据管理

点击 **"数据管理"** 菜单

#### 查看数据

- 查看所有已上传的成绩记录
- 显示上传时间、年级、班级
- 统计数据总量

#### 清除数据

**适用场景：** 学期结束，需要清空旧数据

**操作步骤：**
1. 点击 **"清除所有数据"** 按钮
2. 系统会弹出确认对话框，说明将删除：
   - 所有成绩记录
   - 所有历史成绩明细
   - 所有学科配置
3. 确认后输入"确认删除"
4. 数据将从云端数据库永久删除

**重要提示：**
- ⚠️ 此操作不可恢复！
- ⚠️ 删除后需要刷新其他页面查看效果
- ✅ 删除前建议导出或备份重要数据

#### 权限说明
- **班级老师**：可访问（建议谨慎操作）
- **管理员**：可访问

---

## 📐 数据计算说明

### 年级三率计算（基于年级前90%）

#### 参评人数
将全年级学生按**总分**从高到低排序，取前**90%**

#### 优秀率标准分
- **总分**：参评学生中第前20%名学生的总分
- **学科**：参评学生中第前20%名学生的该学科分数

#### 及格率标准分
- **总分**：所有学科总分的60%
- **学科**：该学科总分的60%

#### 综合率标准分
- **总分**：参评学生的总分平均分
- **学科**：参评学生该学科的平均分

#### 三率计算
- **优秀率** = 分数≥优秀率标准分的学生数 / 参评人数 × 100%
- **及格率** = 分数≥及格率标准分的学生数 / 参评人数 × 100%
- **综合率** = 分数≥综合率标准分的学生数 / 参评人数 × 100%
- **三率之和** = 优秀率 + 及格率 + 综合率

### 班级三率计算（基于本班前95%）

#### 参评人数
将本班学生按**总分**从高到低排序，取前**95%**

#### 标准分和三率计算
计算方法与年级相同，但参评范围为本班前95%学生

**关键区别：**
- 年级：参评比例90%
- 班级：参评比例95%

---

## 🎨 界面说明

### 颜色标识

#### 三率表格颜色
- **优秀率**：绿色 🟢
- **及格率**：蓝色 🔵
- **综合率**：橙色 🟠
- **三率之和**：红色加粗 🔴

#### 降序列
- **红色粗体**：突出显示，便于查看成绩排序

#### 提示框
- **蓝色背景**：班级老师权限提示
- **橙色背景**：年级数据访问提示

### 排序功能

大部分表格支持点击列头排序：
- 点击一次：升序
- 再点击一次：降序
- 特别是降序列，方便查看成绩分布

---

## ⚠️ 注意事项

### 数据安全

- ✅ 所有数据保存在云端（Supabase数据库）
- ✅ 多台电脑、多个老师可同时访问
- ✅ 登录状态保存在浏览器，刷新页面保持登录
- ✅ 关闭浏览器后下次需要重新登录
- ⚠️ **建议保留原始Excel文件作为备份**

### 密码安全

- ⚠️ 请勿将密码告知无关人员
- ⚠️ 管理员密码特别重要，需妥善保管
- ✅ 定期更换管理员密码（需联系技术人员）

### 使用建议

#### 班级老师
1. 每次考试后及时上传成绩
2. 定期查看三率历史对比，了解班级进步
3. 关注个别学生的成绩变化趋势
4. 学期结束前导出重要数据

#### 管理员
1. 定期查看年级数据，对比各班表现
2. 关注三率较低的班级，及时干预
3. 学期结束时执行数据清除操作
4. 管理老师账号和密码

---

## 🔧 常见问题

### 登录相关

**Q: 忘记密码怎么办？**
A: 
- 班级老师：按规则计算（年级数字+0+班级号）
- 管理员：联系技术人员重置

**Q: 可以修改密码吗？**
A: 当前版本需要联系技术人员修改代码。如需灵活修改密码，可升级系统。

**Q: 登录后能保持多久？**
A: 关闭浏览器前一直保持登录状态，关闭浏览器后需要重新登录。

### 上传相关

**Q: Excel文件上传失败？**
A: 请检查：
- 文件格式是否为 .xlsx 或 .xls
- 是否包含"姓名"列
- 成绩是否为数字格式（不能是文本）

**Q: 能上传多次吗？**
A: 可以！每次上传都会作为一条新记录保存，用于历史对比。

**Q: 上传错了怎么办？**
A: 暂时无法删除单条记录，只能通过"清除所有数据"功能删除全部数据后重新上传。

### 数据查看

**Q: 为什么看不到数据？**
A: 请检查：
- 是否已上传成绩
- 年级和班级是否选择正确
- 班级老师是否尝试查看其他班级（权限限制）

**Q: 降序列是什么意思？**
A: 降序列用红色字体显示该学科的分数，便于快速查看成绩从高到低的分布情况。

**Q: 参评人数为什么不是全部学生？**
A: 为了排除极端情况（如缺考、异常低分），年级取90%，班级取95%。

### 权限相关

**Q: 班级老师能看到其他班级的数据吗？**
A: 不能。班级老师只能看到自己班级的数据（除年级数据页面外）。

**Q: 年级数据页面为什么班级老师也能看？**
A: 年级数据是汇总信息，便于老师了解整体情况，但不影响班级隐私。

### 技术问题

**Q: 可以在手机上使用吗？**
A: 可以，但建议在电脑上使用，体验更好。

**Q: 可以同时多人使用吗？**
A: 可以！系统支持多人同时在线，数据实时同步。

**Q: 需要安装什么软件吗？**
A: 在线访问无需安装，使用浏览器即可。本地运行需要安装Node.js。

---

## 💡 使用技巧

### 技巧1：快速查看班级排名
在班级数据页面，点击"总分"列头，可以快速按总分排序。

### 技巧2：对比学科表现
在年级各学科三率表中，横向对比不同学科的三率之和，找出薄弱学科。

### 技巧3：跟踪学生进步
定期在"学生成绩变化"页面查看重点学生，及时发现问题。

### 技巧4：导出数据
虽然系统暂不支持导出功能，但可以：
- 截图保存重要数据
- 复制表格粘贴到Excel
- 保留原始上传的Excel文件

### 技巧5：学期规划
- 月考后上传数据并分析
- 期中考试重点关注三率变化
- 期末前查看整学期趋势
- 学期结束清除数据，新学期重新开始

---

## 📱 系统要求

### 推荐配置
- **浏览器**：Chrome / Edge（最新版本）
- **屏幕分辨率**：1366×768 或以上
- **网络**：需要互联网连接（访问云端数据库）

### 最低配置
- **浏览器**：Firefox / Safari（支持HTML5）
- **屏幕分辨率**：1024×768
- **网络**：稳定的互联网连接

### 本地运行配置
- **操作系统**：Windows / macOS / Linux
- **Node.js**：14.0 或以上版本
- **内存**：建议4GB以上

---

## 🆘 技术支持

### 遇到问题时

1. **查看本文档**：大部分问题都能在这里找到答案
2. **检查网络**：确保网络连接正常
3. **刷新页面**：按 F5 或 Ctrl+R 刷新
4. **清除缓存**：Ctrl+Shift+Delete 清除浏览器缓存
5. **重新登录**：退出后重新登录
6. **联系技术人员**：如以上方法都无效

### 反馈建议

如有改进建议或发现问题，请联系技术人员反馈。

---

## 📚 附录

### 密码速查表

| 年级 | 1班 | 2班 | 3班 | 4班 | 5班 | 6班 |
|------|-----|-----|-----|-----|-----|-----|
| 一年级 | 101 | 102 | 103 | 104 | 105 | 106 |
| 二年级 | 201 | 202 | 203 | 204 | 205 | 206 |
| 三年级 | 301 | 302 | 303 | 304 | 305 | 306 |
| 四年级 | 401 | 402 | 403 | 404 | 405 | 406 |
| 五年级 | 501 | 502 | 503 | 504 | 505 | 506 |
| 六年级 | 601 | 602 | 603 | 604 | 605 | 606 |

**管理员密码：** admin123

### 更新日志

**v2.0** (2025-10-30)
- ✨ 新增权限管理功能（登录系统）
- ✨ 新增年级总分三率和各学科三率展示
- ✨ 新增班级自己的三率计算（基于本班前95%）
- ✨ 新增学科降序列（红色字体显示）
- ✨ 优化三率历史对比（合并趋势图，每科独立展示）
- 🐛 修复若干已知问题

**v1.0** (2025-10-04)
- 🎉 系统首次发布
- ✅ 基础功能完成

---

**祝使用愉快！** 📚✨

如有疑问，欢迎随时咨询！
